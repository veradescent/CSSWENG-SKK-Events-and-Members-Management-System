<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
  body, .login-page { font-family: 'Inter', sans-serif; }
  .login-page { min-height: 80vh; display:flex; align-items:center; justify-content:center; padding:2rem; background:#f6f7fb; }
  .login-box { width:420px; background:#fff; padding:28px; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.06); }
  .login-box h2 { margin:0 0 10px; font-weight:600; color:#111827; }
  .form-group { margin-bottom:12px; display:flex; flex-direction:column; }
  .form-group label { margin-bottom:6px; font-size:14px; color:#374151; }
  .form-group input, .form-group select { padding:10px 12px; border:1px solid #e5e7eb; border-radius:8px; font-size:14px; }
  .register-btn { width:100%; padding:10px 12px; border-radius:8px; background:#0f172a; color:white; font-weight:600; border:none; cursor:pointer; }
  .login-cta { text-align:center; margin-top:14px; }
  .small { font-size:13px; color:#6b7280; text-align:center; margin-top:8px; }
  a.inline { color:#0f172a; text-decoration:none; font-weight:600; }
</style>

<div class="login-page">
  <div class="login-box">
    <h2>Create an account</h2>

    <form id="registerForm" method="post" action="/register">
      <div class="form-group">
        <label for="username">Username</label>
        <input id="username" name="username" type="text" placeholder="Your username" required />
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input id="email" name="email" type="email" placeholder="you@example.com" required />
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input id="password" name="password" type="password" placeholder="Choose a password" required />
      </div>


      <div class="login-cta">
        <button class="register-btn" type="submit">Register</button>
      </div>
    </form>

    <div class="small">
      Already have an account? <a class="inline" href="/login">Sign in</a>
    </div>
  </div>
</div>
<script>
document.getElementById('registerForm').addEventListener('submit', async (e) => {
  e.preventDefault();

  const form = e.target;
  const data = {
    username: form.username.value,
    email: form.email.value,
    password: form.password.value,
    role: form.role.value
  };

  const resp = await fetch('/register', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  });

  const json = await resp.json();

  if (json.success) {
    alert("User created");
    window.location.href = "/login";  // redirect to login page
  } else {
    alert(json.message || "Error creating user");
  }
});
</script>
