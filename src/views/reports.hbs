<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SKK Reports</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background-color: #fff;
      font-family: "Poppins", sans-serif;
      margin: 0;
    }

    .page-title {
      text-align: center;
      font-weight: 700;
      font-size: 2rem;
      margin: 30px 0;
    }

    .reports-container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 30px;
      max-width: 1100px;
      margin: auto;
      padding: 0 20px;
    }

    /* Calendar */
    .calendar-box {
      background-color: #f6f6f6;
      border-radius: 8px;
      padding: 25px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    .calendar-header h4 {
      margin: 0;
      font-weight: 600;
    }
    .calendar-controls button {
      background-color: #133b1c;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 5px 12px;
      margin: 0 3px;
      font-size: 0.9rem;
    }
    .calendar-controls .active {
      background-color: #5dbb63;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      text-align: center;
    }

    .day-header {
      font-weight: 600;
      padding: 10px 0;
      background-color: #5dbb63;
      color: white;
      border-radius: 5px;
      text-align: center;
    }

    .calendar-day {
      background-color: #dcdcdc;
      padding: 15px;
      border-radius: 6px;
      min-height: 80px;
      font-size: 0.9rem;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .calendar-box.day-view .calendar-day {
      min-height: 150px; 
      font-size: 1.1rem;
    }

    .calendar-day.event {
      background-color: #b4e4b4;
      border: 1px solid #3a813a;
      color: #133b1c;
      font-weight: 500;
    }

    .previous-events {
      background-color: #f0f0f0;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .event-card {
      background-color: white;
      border-left: 4px solid #5dbb63;
      border-radius: 6px;
      padding: 10px 15px;
      margin-bottom: 10px;
    }

    .view-btn {
      display: block;
      background-color: #5dbb63;
      color: white;
      font-weight: 600;
      border: none;
      border-radius: 6px;
      padding: 10px 30px;
      margin: 30px auto;
    }

    .chart-container {
      max-width: 800px;
      background-color: #fafafa;
      border-radius: 10px;
      padding: 25px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin: 0 auto 60px;
    }
  </style>
</head>

<body>
  <h2 class="page-title">SKK Reports</h2>

  <div class="reports-container">
    <!-- Calendar -->
    <div class="calendar-box" id="calendarBox">
      <div class="calendar-header">
        <h4 id="calendarTitle">October 2025</h4>
        <div class="calendar-controls">
          <button id="dayBtn">Day</button>
          <button id="weekBtn">Week</button>
          <button id="monthBtn" class="active">Month</button>
        </div>
      </div>

      <div class="calendar-grid" id="calendarGrid">
        <!-- Headers -->
        <div class="day-header">SUN</div>
        <div class="day-header">MON</div>
        <div class="day-header">TUE</div>
        <div class="day-header">WED</div>
        <div class="day-header">THU</div>
        <div class="day-header">FRI</div>
        <div class="day-header">SAT</div>
      </div>
    </div>

    <!-- Previous Events -->
    <div class="previous-events">
      <h5>Previous events</h5>
      <div class="event-card">
        <small>October 15, 2025 | 9:00 AM – 2:00 PM</small>
        <strong>SKK General Assembly</strong>
        <small>LOCATION: Quezon City</small>
      </div>
      <div class="event-card">
        <small>October 19, 2025 | 1:00 PM – 3:00 PM</small>
        <strong>Church Event</strong>
        <small>LOCATION: Quezon City</small>
      </div>
    </div>
  </div>

  <button class="view-btn">View Statistics</button>

  <div class="chart-container">
    <canvas id="eventChart"></canvas>
    <p class="text-center mt-3 mb-0 fw-semibold">Total attendees: 400</p>
  </div>

  <script>
  const ctx = document.getElementById("eventChart");
  new Chart(ctx, {
    type: "bar",
    data: {
      labels: ["SKK Assembly", "Church Event"],
      datasets: [{ label: "No. of Attendees", data: [220, 180], backgroundColor: "#5dbb63" }]
    },
    options: { indexAxis: "y", scales: { x: { beginAtZero: true } }, plugins: { legend: { display: false } } }
  });

  const dayBtn = document.getElementById("dayBtn");
  const weekBtn = document.getElementById("weekBtn");
  const monthBtn = document.getElementById("monthBtn");
  const calendarGrid = document.getElementById("calendarGrid");
  const calendarBox = document.getElementById("calendarBox");
  const calendarTitle = document.getElementById("calendarTitle");

  // Use a Date object to keep track of which month is shown
  let currentDate = new Date(); // default to today
  // Optionally set to a particular month/year:
  // currentDate = new Date(2025, 9, 1); // October 2025 (month is 0-based)

  const monthNames = ["January","February","March","April","May","June","July","August","September","October","November","December"];

  function renderMonthView(date) {
    const y = date.getFullYear();
    const m = date.getMonth(); // 0-based
    // number of days in month
    const daysInMonth = new Date(y, m + 1, 0).getDate();
    // weekday of first day (0=Sun..6=Sat)
    const firstWeekday = new Date(y, m, 1).getDay();

    // update title
    calendarTitle.textContent = `${monthNames[m]} ${y}`;

    // headers (week day labels) — keep them if not already present in DOM
    const headers = `
      <div class="day-header">SUN</div>
      <div class="day-header">MON</div>
      <div class="day-header">TUE</div>
      <div class="day-header">WED</div>
      <div class="day-header">THU</div>
      <div class="day-header">FRI</div>
      <div class="day-header">SAT</div>
    `;

    // Build day cells: leading blanks, then 1..daysInMonth
    let cells = "";
    // leading blanks
    for (let i = 0; i < firstWeekday; i++) cells += `<div class="calendar-day" aria-hidden="true"></div>`;
    // real days
    for (let d = 1; d <= daysInMonth; d++) {
      cells += `<div class='calendar-day'>${d}</div>`;
    }
    // Optionally append trailing blanks to fill last week row (keeps grid neat)
    const totalCells = firstWeekday + daysInMonth;
    const trailing = (7 - (totalCells % 7)) % 7;
    for (let i = 0; i < trailing; i++) cells += `<div class="calendar-day" aria-hidden="true"></div>`;

    calendarGrid.innerHTML = headers + cells;
  }

  function renderWeekView(date) {
    // Simple example: render 7 days starting from the Sunday of the current week
    const copy = new Date(date);
    const startOfWeek = new Date(copy.setDate(copy.getDate() - copy.getDay())); // Sunday
    const headers = `
      <div class="day-header">SUN</div>
      <div class="day-header">MON</div>
      <div class="day-header">TUE</div>
      <div class="day-header">WED</div>
      <div class="day-header">THU</div>
      <div class="day-header">FRI</div>
      <div class="day-header">SAT</div>
    `;
    let cells = "";
    for (let i = 0; i < 7; i++) {
      const d = new Date(startOfWeek);
      d.setDate(startOfWeek.getDate() + i);
      cells += `<div class="calendar-day">${d.getDate()}</div>`;
    }
    calendarGrid.innerHTML = headers + cells;
    calendarTitle.textContent = `${monthNames[date.getMonth()]} ${date.getFullYear()}`;
  }

  function renderDayView(date) {
    calendarGrid.innerHTML = `
      <div class="day-header" style="grid-column: span 7;">${monthNames[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}</div>
      <div class="calendar-day" style="grid-column: span 7;">Today's Events</div>
    `;
    calendarTitle.textContent = `${monthNames[date.getMonth()]} ${date.getFullYear()}`;
  }

  function setActive(btn) {
    document.querySelectorAll(".calendar-controls button").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
  }

  dayBtn.onclick = () => {
    setActive(dayBtn);
    calendarBox.classList.add("day-view");
    renderDayView(currentDate);
  };

  weekBtn.onclick = () => {
    setActive(weekBtn);
    calendarBox.classList.remove("day-view");
    renderWeekView(currentDate);
  };

  monthBtn.onclick = () => {
    setActive(monthBtn);
    calendarBox.classList.remove("day-view");
    renderMonthView(currentDate);
  };

  // Optional: allow navigating months (you can wire prev/next buttons)
  // For example add two buttons and adjust currentDate month then re-render:
  // currentDate.setMonth(currentDate.getMonth() - 1); renderMonthView(currentDate);

  // initial render (month)
  monthBtn.click();
</script>

</body>
</html>
